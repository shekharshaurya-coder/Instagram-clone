<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SocialSync</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">

        <!-- ==================== LEFT SIDEBAR ==================== -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">SocialSync</div>
            </div>

            <!-- Filled dynamically from backend -->
            <div class="account-section" id="account-section">
                <div class="account-avatar">üë§</div>
                <div class="account-info">
                    <h3 id="account-name"></h3>
                    <p id="account-username"></p>
                </div>
            </div>

            <ul class="menu">
                <li class="menu-item">
                    <a class="menu-link" onclick="showSearchModal()">üîç Search</a>
                </li>
                <li class="menu-item">
                    <a class="menu-link active" onclick="switchToHome()">üè† Home</a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" onclick="showPostModal()">‚ûï Post</a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" onclick="switchToNotifications()">
                        üîî Notifications
                        <span class="notification-badge" id="notificationBadge" style="display:none;"></span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/analytics.html">üìä Analytics</a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/profile.html">üë§ Profile</a>
                </li>
            </ul>

            <div class="sidebar-footer">
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </aside>

        <!-- ==================== MAIN CONTENT ==================== -->
        <main class="main-container">
            <div class="top-header">
                <div class="toggle-switch">
                    <button class="toggle-btn active" onclick="showFeed()">üì± Feed</button>
                    <button class="toggle-btn" onclick="showMessages()">üí¨ Messages</button>
                    <button class="toggle-btn" onclick="showNotifications()">üîî Notifications</button>
                </div>
            </div>

            <!-- ==================== FEED VIEW ==================== -->
            <div class="content active" id="feed-view">
                <div class="stories" id="stories-container"></div>
                <div id="feed-posts"></div>
            </div>

            <!-- ==================== NOTIFICATIONS VIEW ==================== -->
            <div class="content" id="notifications-view">
                <div class="notifications-header">
                    <h2 style="padding:20px;margin:0;font-size:18px;color:#e4e6eb;">Notifications</h2>
                </div>
                <div id="notifications-list"></div>
            </div>

            <!-- ==================== MESSAGES VIEW ==================== -->
            <div class="content" id="messages-view">
                <div class="messages-header">
                    <input type="text" id="messageSearchInput" class="search-input" placeholder="Search users to message..." oninput="searchUsersToMessage()">
                </div>
                
                <div id="messageSearchResults" style="display:none;"></div>
                
                <div id="conversationsList">
                    <div style="padding:20px;text-align:center;color:#8b8d91;">
                        Your conversations will appear here
                    </div>
                </div>

                <!-- Chat Window -->
                <div id="chatWindow" style="display:none;">
                    <div class="chat-header">
                        <button class="back-to-conversations" onclick="backToConversations()">‚Üê Back</button>
                        <div class="chat-user-info">
                            <div class="chat-user-avatar" id="chatUserAvatar">üë§</div>
                            <div>
                                <div class="chat-user-name" id="chatUserName"></div>
                                <div class="chat-user-username" id="chatUsername"></div>
                            </div>
                        </div>
                    </div>
                    <div class="chat-messages" id="chatMessages"></div>
                    <div class="chat-input-container">
                        <input type="text" id="messageInput" class="chat-input" placeholder="Type a message..." onkeypress="handleMessageKeyPress(event)">
                        <button class="send-message-btn" onclick="sendMessage()">Send</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- ==================== SEARCH MODAL ==================== -->
        <div class="modal-overlay" id="searchModal">
            <div class="modal">
                <div class="modal-header">
                    <div class="modal-title">Search Users</div>
                    <button class="modal-close" onclick="closeSearchModal()">√ó</button>
                </div>

                <div class="modal-body">
                    <div class="form-group">
                        <input 
                            type="text" 
                            id="searchInput" 
                            class="form-input" 
                            placeholder="Search by username..."
                            oninput="searchUsers()"
                        >
                    </div>

                    <div id="searchResults" class="search-results"></div>
                </div>
            </div>
        </div>

        <!-- ==================== POST MODAL ==================== -->
        <div class="modal-overlay" id="postModal">
            <div class="modal">
                <div class="modal-header">
                    <div class="modal-title">Create Post</div>
                    <button class="modal-close" onclick="closePostModal()">√ó</button>
                </div>

                <div class="modal-body">
                    <div class="post-type-selector">
                        <button class="type-btn active" onclick="selectPostType('text')">üìù Text Post</button>
                        <button class="type-btn" onclick="selectPostType('file')">üìé File Post</button>
                    </div>

                    <!-- Text Post -->
                    <div class="post-form active" id="textForm">
                        <div class="form-group">
                            <label class="form-label">What's on your mind?</label>
                            <textarea id="textPostInput" class="form-textarea" placeholder="Share your thoughts..."></textarea>
                        </div>
                    </div>

                    <!-- File Post -->
                    <div class="post-form" id="fileForm">
                        <div class="form-group">
                            <label class="form-label">Upload File</label>
                            <label class="file-upload-area">
                                <input id="fileUploadInput" type="file" accept="image/*,video/*">
                                <div class="upload-icon">üìÅ</div>
                                <div class="upload-text">Click to upload or drag and drop</div>
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Caption</label>
                            <input id="fileCaptionInput" type="text" class="form-input" placeholder="Add a caption to your file...">
                        </div>
                    </div>

                </div>

                <div class="modal-footer">
                    <button class="btn-cancel" onclick="closePostModal()">Cancel</button>
                    <button class="btn-post" onclick="submitPost()">Post</button>
                </div>

            </div>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>